<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}" class="no-js" itemscope itemtype="http://schema.org/WebPage">
  <head>
    <!-- Metadatos, SEO, Favicon, etc. -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    <link rel="canonical" href="{{ site.url }}{{ page.url | replace:'index.html','' }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url | replace:'index.html','' }}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}The Ultimate AI-First Development Framework | PAELLADOC{% endif %}">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% elsif page.excerpt %}{{ page.excerpt | strip_html | truncate: 160 }}{% else %}Transform your AI development process with a comprehensive framework that makes AI projects sustainable, transparent and efficient. From ideation to deployment, build AI products that scale with confidence.{% endif %}">
    
    {% if page.layout == 'post' and page.image %}
    <meta property="og:image" content="{{ site.url }}{{ page.image }}">
    {% else %}
    <meta property="og:image" content="{{ site.url }}/assets/images/og-image.jpg">
    {% endif %}
    
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:locale" content="en_US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ site.url }}{{ page.url | replace:'index.html','' }}">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}The Ultimate AI-First Development Framework | PAELLADOC{% endif %}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% elsif page.excerpt %}{{ page.excerpt | strip_html | truncate: 160 }}{% else %}Transform your AI development process with a comprehensive framework that makes AI projects sustainable, transparent and efficient. From ideation to deployment, build AI products that scale with confidence.{% endif %}">
    
    {% if page.layout == 'post' and page.image %}
    <meta name="twitter:image" content="{{ site.url }}{{ page.image }}">
    {% else %}
    <meta name="twitter:image" content="{{ site.url }}/assets/images/twitter-image.jpg">
    {% endif %}
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#000000">
    
    <!-- Estilos adicionales para el menú desktop/mobile -->
    <style>
      @media (max-width: 768px) {
        .desktop-nav {
          display: none !important;
        }
      }
    </style>
    
    <!-- Preload y CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Cargar solo los iconos de Font Awesome que usamos -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/solid.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/fontawesome.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/solid.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/brands.min.css">
    </noscript>
    
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap"></noscript>
    
    <style>
      /* Estilos críticos inline para el renderizado inicial */
      @font-face {
        font-family: 'Inter';
        font-style: normal;
        font-weight: 400;
        font-display: swap;
        src: local('Inter Regular'), local('Inter-Regular'), url(https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7.woff2) format('woff2');
      }
      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background-color: #000000;
        color: #ffffff;
        margin: 0;
        padding: 0;
      }
      [data-theme="light"] {
        background-color: #ffffff;
        color: #121212;
      }
      /* Estilos críticos para el logo, títulos y menú */
      .logo-text, h1, h2, h3, h4, h5, h6, .nav-links a, .nav-links span {
        font-family: 'Bruno Ace SC', monospace;
        font-weight: 700;
      }
      .logo-text {
        font-size: 1.5rem;
        color: var(--color-text-primary);
      }
      /* Asegurarnos que el contenido del post usa Inter */
      .post-content p, .post-content li, .post-content blockquote {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
      @font-face {
        font-family: 'Inter';
        font-weight: 100 900;
        font-display: swap;
        src: url('/assets/fonts/inter-var.woff2') format('woff2');
      }
    </style>
    
    <link rel="stylesheet" href="{{ '/assets/css/design-system.min.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/components/github-stats.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/components/github-button.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/components/hero-mobile-optimized.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/components/theme-toggle-position.css' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/components/breadcrumbs.css' | relative_url }}">
    
    <!-- Cargar CSS de documentación solo si es una página de docs -->
    {% if page.layout contains 'docs' %}
    <link rel="stylesheet" href="{{ '/assets/css/docs.css' | relative_url }}">
    {% endif %}
    
    <!-- Script directo para garantizar que aparezcan las estadísticas de GitHub -->
    <script src="{{ '/assets/js/github-stats-direct.js' | relative_url }}" defer></script>
    
    <!-- Schema.org y Accesibilidad -->
    {% include website-schema.html %}
    
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "{{ site.title }}",
        "description": "{{ site.description }}",
        "url": "{{ site.url }}",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "All",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "author": {
          "@type": "Organization",
          "name": "{{ site.author }}",
          "url": "{{ site.url }}"
        }
      }
    </script>
    <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | absolute_url }}">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <!-- Umami Analytics - Condicional -->
    <script>
      // Función para verificar si debemos cargar Umami
      function shouldLoadUmami() {
        // No cargar en desarrollo local
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
          return false;
        }
        
        // Verificar si el usuario ha optado por no ser trackeado
        if (localStorage.getItem('paellaNoTrack') === 'true') {
          return false;
        }
        
        return true;
      }

      // Cargar Umami solo si es necesario
      if (shouldLoadUmami()) {
        const umamiScript = document.createElement('script');
        umamiScript.defer = true;
        umamiScript.src = 'https://cloud.umami.is/script.js';
        umamiScript.setAttribute('data-website-id', 'f74b1c68-b362-4670-ae00-4e72cf02be92');
        document.head.appendChild(umamiScript);
      }
    </script>
    <!-- Añadir el CSS del menú móvil -->
    <link rel="stylesheet" href="{{ '/assets/css/mobile-menu.css' | relative_url }}">
    
    <!-- Forzar tema oscuro por defecto, pero respetando preferencias -->
    <script>
      // Solo establecer tema oscuro si no hay preferencia guardada
      if (!localStorage.getItem('paellaTheme')) {
        localStorage.setItem('paellaTheme', 'dark');
      }
      // Aplicar el tema guardado en localStorage
      const savedTheme = localStorage.getItem('paellaTheme');
      if (savedTheme === 'dark') {
        document.documentElement.removeAttribute('data-theme');
      } else if (savedTheme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
      }
    </script>
  </head>
  <body class="">
    <!-- Skip navigation for accessibility -->
    <a class="skip-to-content" href="#main-content">Skip to content</a>
    
    <header class="site-header" role="banner" itemscope itemtype="http://schema.org/WPHeader">
      <div class="container">
        <div class="header-content">
          <a href="{{ "/" | relative_url }}" class="site-logo" aria-label="PAELLADOC Home" itemprop="url">
            <span class="logo-text" itemprop="name">PAELLADOC</span>
          </a>
          <nav class="site-nav" role="navigation" aria-label="Main Navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
            <!-- Botón de menú móvil -->
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle Menu" aria-expanded="false" aria-controls="mobile-nav">
              <span class="sr-only">Menu</span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </button>
            <!-- Navegación de escritorio -->
            <ul class="nav-links desktop-nav" role="menu">
              <li role="none"><a href="{{ "/" | relative_url }}" {% if page.url == "/" %}class="active" aria-current="page"{% endif %} aria-label="Home page" itemprop="url" role="menuitem"><span itemprop="name">HOME</span></a></li>
              <li role="none"><a href="{{ "/blog" | relative_url }}" {% if page.url contains "/blog" %}class="active" aria-current="page"{% endif %} aria-label="Blog page" itemprop="url" role="menuitem"><span itemprop="name">BLOG</span></a></li>
              <li role="none"><a href="{{ "/contribute" | relative_url }}" {% if page.url == "/contribute/" %}class="active" aria-current="page"{% endif %} aria-label="Contribute page" itemprop="url" role="menuitem"><span itemprop="name">CONTRIBUTE</span></a></li>
              <li role="none"><a href="https://github.com/jlcases/paelladoc" aria-label="GitHub Repository" itemprop="url" role="menuitem"><span itemprop="name">GITHUB</span></a></li>
              <li role="none"><a href="https://github.com/jlcases/paelladoc/discussions" aria-label="GitHub Discussions" itemprop="url" role="menuitem"><span itemprop="name">DISCUSSIONS</span></a></li>
            </ul>
            {% include theme-toggle.html %}
          </nav>
        </div>
      </div>
    </header>

    <main class="site-content" id="main-content" role="main" tabindex="-1" itemprop="mainContentOfPage">
      {{ content }}
    </main>

    {% include footer.html %}

    <!-- Scripts -->
    <!-- Añadir nuestro script para el menú móvil antes que los demás -->
    <script src="{{ '/assets/js/mobile-nav.js' | relative_url }}"></script>
    <!-- Mantener otros scripts -->
    <script defer src="{{ '/assets/js/theme-system.min.js' | relative_url }}"></script>
    
    <!-- Scripts optimizados -->
    <script>
      // Add a hidden class for accessibility
      if (!document.querySelector('.sr-only')) {
        const style = document.createElement('style');
        style.textContent = '.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }';
        document.head.appendChild(style);
      }
      
      // Carga scripts no críticos después de la carga completa
      window.addEventListener('load', function() {
        const scripts = [
          '/assets/js/main.min.js',
          '/assets/js/github-stats.js'
        ];
        
        scripts.forEach(src => {
          const script = document.createElement('script');
          script.src = src;
          script.async = true;
          document.body.appendChild(script);
        });
      });
    </script>
    
    <!-- NUEVO Navegación Móvil -->
    <div id="mobile-nav" class="mobile-nav" role="dialog" aria-modal="true" aria-label="Mobile Navigation">
      <button id="mobile-nav-close" class="mobile-nav-close" aria-label="Close menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      <ul class="mobile-nav-links" role="menu">
        <li role="none"><a href="{{ "/" | relative_url }}" {% if page.url == "/" %}class="active" aria-current="page"{% endif %} aria-label="Home page" itemprop="url" role="menuitem"><span itemprop="name">HOME</span></a></li>
        <li role="none"><a href="{{ "/blog" | relative_url }}" {% if page.url contains "/blog" %}class="active" aria-current="page"{% endif %} aria-label="Blog page" itemprop="url" role="menuitem"><span itemprop="name">BLOG</span></a></li>
        <li role="none"><a href="{{ "/contribute" | relative_url }}" {% if page.url == "/contribute/" %}class="active" aria-current="page"{% endif %} aria-label="Contribute page" itemprop="url" role="menuitem"><span itemprop="name">CONTRIBUTE</span></a></li>
        <li role="none"><a href="https://github.com/jlcases/paelladoc" aria-label="GitHub Repository" itemprop="url" role="menuitem"><span itemprop="name">GITHUB</span></a></li>
        <li role="none"><a href="https://github.com/jlcases/paelladoc/discussions" aria-label="GitHub Discussions" itemprop="url" role="menuitem"><span itemprop="name">DISCUSSIONS</span></a></li>
        <!-- Enlace social exclusivo móvil -->
        <li role="none">
          <a href="https://x.com/i/communities/1907494161458090406" class="mobile-social-link" target="_blank" rel="noopener noreferrer" aria-label="Join our community on X" role="menuitem">
            <svg viewBox="0 0 24 24" aria-hidden="true" width="18" height="18" fill="currentColor">
              <g><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></g>
            </svg>
            <span>Join community now</span>
          </a>
        </li>
      </ul>
    </div>
    
    <!-- NUEVO Overlay -->
    <div id="mobile-nav-overlay" class="mobile-nav-overlay"></div>

  </body>
</html>